CanyonRunner={music:null,orientated:!1,Boot:function(a){a.state.add("Preloader",CanyonRunner.Preloader);a.state.add("MainMenu",CanyonRunner.MainMenu);a.state.add("HowToPlay",CanyonRunner.HowToPlay);a.state.add("NavigationSupply",CanyonRunner.NavigationSupply);a.state.add("NavigationBandit",CanyonRunner.NavigationBandit);a.state.add("NavigationHome",CanyonRunner.NavigationHome);a.state.add("Level1",CanyonRunner.Level1);a.state.add("Level2",CanyonRunner.Level2);a.state.add("Level3",CanyonRunner.Level3);
a.state.add("EmotionalFulcrum",CanyonRunner.EmotionalFulcrum);a.state.add("HomeSweetHome",CanyonRunner.HomeSweetHome);a.state.add("EveryThingYouBelievedAboutYourFamilyWasHellishlyWrong",CanyonRunner.EveryThingYouBelievedAboutYourFamilyWasHellishlyWrong)}};
CanyonRunner.Boot.prototype={init:function(){this.input.maxPointers=1;this.stage.disableVisibilityChange=!0;this.game.device.desktop?(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.setMinMax(480,260,1024,768),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0):(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.setMinMax(480,260,1024,768),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.forceOrientation(!0,!1),this.scale.setResizeCallback(this.gameResized,
this),this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this));this.scale.setScreenSize(!0);this.scale.refresh()},preload:function(){this.game.load.atlasJSONHash("sprites","assets/sprites/sprites.png","assets/sprites/sprites.json");this.game.load.image("desert-open","assets/backgrounds/desert-open.png")},create:function(){this.state.start("Preloader")},gameResized:function(a,b){},enterIncorrectOrientation:function(){CanyonRunner.orientated=
!1;document.getElementById("orientation").style.display="block"},leaveIncorrectOrientation:function(){CanyonRunner.orientated=!0;document.getElementById("orientation").style.display="none"}};CanyonRunner.EmotionalFulcrum=function(a){this.angelicVoices=null};
CanyonRunner.EmotionalFulcrum.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.sound.play("sonar");this.background=this.game.add.tileSprite(0,0,1200,800,"sad-desert");this.background.fixedToCamera=!0;this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.playerStats;
null!=localStorage.getItem("Canyon_Runner_9282733_playerStats")?this.playerStats=JSON.parse(localStorage.getItem("Canyon_Runner_9282733_playerStats")):this.playerStats={topScore:0,topTime:0,returnPlayerToState:"NavigationHome"};this.player=this.game.add.sprite(64,64,"sprites","rocket-sprite");this.player.y=120;this.game.physics.enable(this.player,Phaser.Physics.ARCADE);this.emitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400);this.emitter.makeParticles("sprites",["fire1",
"fire2","fire3","smoke-puff"]);this.emitter.gravity=20;this.emitter.setAlpha(1,0,3E3);this.emitter.setScale(.4,0,.4,0,5E3);this.emitter.start(!1,3E3,5);this.emitter.emitX=this.player.x-25;this.emitter.emitY=this.player.y+30;this.burnEngines=!0;this.descendToLearnTheTruth()},update:function(){this.emitter.emitX=this.player.x-25;this.emitter.emitY=this.player.y+30;this.landing&&(this.landingEmitter.emitX=this.player.x+27,this.landingEmitter.emitY=this.player.y+30);this.player.body.velocity.x=0;this.player.body.velocity.y=
0;this.playerSpeed=250;this.backgroundTileSpeed=4;this.slowRocket?(this.background.tilePosition.x-=4,this.sound.play("sonar-found")):this.stopRocket?(this.background.tilePosition.x=0,Math.floor(-90==this.player.angle)&&(this.stopRocket=!1,this.player.angle=-90,this.rocketLanding()),this.player.angle-=2):this.landing||(this.background.tilePosition.x-=10)},toggleMute:function(){this.mute?(this.mute=this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.mute=this.game.sound.mute=!0,this.soundButton.tint=
16711680)},descendToLearnTheTruth:function(){this.sound.play("sonar-found");this.homeSignatureLockedTextStyle={font:"25px Arial",fill:"#09e000",stroke:"#000",strokeThickness:4,align:"center"};this.homeSignatureLockedTextString="Home Signature Detected! Calculating Landing Trajectory!";this.homeSignatureLockedText=this.game.add.text(this.player.x+20,this.player.y,this.homeSignatureLockedTextString,this.homeSignatureLockedTextStyle);this.homeSignatureLockedTextExpiration=this.game.time.create(this.game);
this.homeSignatureLockedTextExpiration.add(4E3,function(){this.homeSignatureLockedText.destroy()},this);this.homeSignatureLockedTextExpiration.start();this.game.add.tween(this.player).to({x:this.game.world.centerX,y:this.game.world.centerY+100},5E3,Phaser.Easing.Linear.None,!0);this.descendTimer=this.game.time.create(this.game);this.descendTimer.add(4900,function(){this.slowRocket=!0;this.emitter.kill()},this);this.descendTimer.start();this.beginLandingTimer=this.game.time.create(this.game);this.beginLandingTimer.add(5300,
function(){this.slowRocket=!1;this.stopRocket=!0},this);this.beginLandingTimer.start()},rocketLanding:function(){this.sound.stop("sonar");this.sound.play("angel");this.landing=!0;this.landingEmitter=this.game.add.emitter(this.player.x,this.player.y,400);this.landingEmitter.makeParticles("sprites",["smoke-puff"]);this.landingEmitter.gravity=20;this.landingEmitter.setAlpha(1,0,3E3);this.landingEmitter.setScale(.4,0,.4,0,5E3);this.landingEmitter.start(!1,3E3,5);this.landingEmitter.emitX=this.player.x-
25;this.landingEmitter.emitY=this.player.y+30;this.game.add.tween(this.player).to({y:this.player.y+350},10500,Phaser.Easing.Linear.None,!0);this.showFinalSceneTimer=this.game.time.create(this.game);this.showFinalSceneTimer.add(10500,function(){this.sound.stop("sonar");this.sound.stop("angel");355<this.playerStats.topTime?this.state.start("EveryThingYouBelievedAboutYourFamilyWasHellishlyWrong"):375>=this.playerStats.topTime?this.state.start("HomeSweetHome"):this.state.start("EveryThingYouBelievedAboutYourFamilyWasHellishlyWrong")},
this);this.showFinalSceneTimer.start()}};CanyonRunner.EveryThingYouBelievedAboutYourFamilyWasHellishlyWrong=function(a){};
CanyonRunner.EveryThingYouBelievedAboutYourFamilyWasHellishlyWrong.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.sound.play("Ariely");this.sound.stop("aronara");this.background=this.game.add.sprite(-300,0,"sprites","home-burning");this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?
16711680:16777215;this.playerStats;null!=localStorage.getItem("Canyon_Runner_9282733_playerStats")?this.playerStats=JSON.parse(localStorage.getItem("Canyon_Runner_9282733_playerStats")):this.playerStats={topScore:0,topTime:0,returnPlayerToState:"NavigationHome"};this.houseEmitter=this.game.add.emitter(620,200,400);this.houseEmitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]);this.houseEmitter.gravity=-200;this.houseEmitter.setAlpha(1,0,3E3);this.houseEmitter.setScale(.4,0,.4,0,
5E3);this.houseEmitter.start(!1,3E3,5);this.houseEmitter.emitX=640;this.houseEmitter.emitY=370;this.player=this.game.add.sprite(64,64,"sprites","rocket-sprite");this.player.x=510;this.player.y=0;this.player.angle=-90;this.game.physics.enable(this.player,Phaser.Physics.ARCADE);this.landingEmitter=this.game.add.emitter(this.player.x,this.player.y,400);this.landingEmitter.makeParticles("sprites",["smoke-puff"]);this.landingEmitter.gravity=20;this.landingEmitter.setAlpha(1,0,3E3);this.landingEmitter.setScale(.4,
0,.4,0,5E3);this.landingEmitter.start(!1,3E3,5);this.landingEmitter.emitX=this.player.x-25;this.landingEmitter.emitY=this.player.y+30;this.faceTheBurning()},update:function(){this.landingEmitter.emitX=this.player.x+27;this.landingEmitter.emitY=this.player.y+30},toggleMute:function(){this.game.sound.mute?(this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.game.sound.mute=!0,this.soundButton.tint=16711680)},faceTheBurning:function(){this.bandit=this.game.add.sprite(64,64,"sprites","bandit");
this.bandit.x=750;this.bandit.y=200;this.bandit.checkWorldBounds=!0;this.bandit.outOfBoundsKill=!0;this.game.add.tween(this.bandit).to({x:-100},5500,Phaser.Easing.Linear.None,!0);this.game.add.tween(this.player).to({y:440},7500,Phaser.Easing.Linear.None,!0);this.exhaustTimer=this.game.time.create(this.game);this.exhaustTimer.add(7500,function(){this.landingEmitter.kill();this.bandit&&this.bandit.kill();this.showFinalSplashScreen()},this);this.exhaustTimer.start()},showFinalSplashScreen:function(){this.game.add.sprite(0,
0,"sprites","sad-splashscreen");this.addFinalButtons()},addFinalButtons:function(){this.tryAgainButton=this.add.button(this.game.world.centerX-300,this.game.world.centerY+170,"sprites",this.tryAgain,this,"try-again-button","try-again-button","try-again-button");this.cryAboutItButton=this.add.button(this.game.world.centerX+100,this.game.world.centerY+170,"sprites",this.cryAboutIt,this,"cry-about-it-button","cry-about-it-button","cry-about-it-button")},tryAgain:function(){this.sound.stop("Ariely");
this.playerStats={topScore:0,topTime:0,returnPlayerToState:"HowToPlay"};localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));this.state.start("MainMenu")},cryAboutIt:function(){window.open("https://twitter.com/share?text=I+just+finished+CanyonRunner+and+the+ending+was+seriously+messed+up&hashtags=html5,games&via=zackproser","_blank")}};CanyonRunner.HomeSweetHome=function(a){};
CanyonRunner.HomeSweetHome.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.sound.play("3rdBallad");this.background=this.game.add.sprite(-300,0,"sprites","home-burning");this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.houseEmitter=this.game.add.emitter(0,
0,400);this.houseEmitter.makeParticles("sprites",["smoke-puff"]);this.houseEmitter.gravity=-800;this.houseEmitter.setAlpha(1,0,9E3);this.houseEmitter.setScale(.2,.5,.2,.5,0);this.houseEmitter.start(!1,3E3,5);this.houseEmitter.emitX=675;this.houseEmitter.emitY=300;this.player=this.game.add.sprite(64,64,"sprites","rocket-sprite");this.player.x=510;this.player.y=0;this.player.angle=-90;this.game.physics.enable(this.player,Phaser.Physics.ARCADE);this.landingEmitter=this.game.add.emitter(this.player.x,
this.player.y,400);this.landingEmitter.makeParticles("sprites",["smoke-puff"]);this.landingEmitter.gravity=20;this.landingEmitter.setAlpha(1,0,3E3);this.landingEmitter.setScale(.4,0,.4,0,5E3);this.landingEmitter.start(!1,3E3,5);this.landingEmitter.emitX=this.player.x-25;this.landingEmitter.emitY=this.player.y+30;this.homeComing()},update:function(){this.landingEmitter.emitX=this.player.x+27;this.landingEmitter.emitY=this.player.y+30},toggleMute:function(){this.game.sound.mute?(this.game.sound.mute=
!1,this.soundButton.tint=16777215):(this.game.sound.mute=!0,this.soundButton.tint=16711680)},homeComing:function(){this.game.add.tween(this.player).to({y:440},7500,Phaser.Easing.Linear.None,!0);this.exhaustTimer=this.game.time.create(this.game);this.exhaustTimer.add(7500,function(){this.landingEmitter.kill();this.showFinalSplashScreen()},this);this.exhaustTimer.start()},showFinalSplashScreen:function(){this.game.add.sprite(0,0,"sprites","happy-splashscreen");this.addFinalButtons()},addFinalButtons:function(){this.tryAgainButton=
this.add.button(this.game.world.centerX-300,this.game.world.centerY+170,"sprites",this.playAgain,this,"play-again-button","play-again-button","play-again-button");this.cryAboutItButton=this.add.button(this.game.world.centerX+100,this.game.world.centerY+170,"sprites",this.cryAboutIt,this,"share-the-love-button","share-the-love-button","share-the-love-button")},playAgain:function(){this.sound.stop("sonar");this.sound.stop("angel");this.sound.stop("3rdBallad");this.playerStats={topScore:0,topTime:0,
returnPlayerToState:"HowToPlay"};localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));this.state.start("MainMenu")},cryAboutIt:function(){window.open("https://twitter.com/share?text=I+Ran+The+Whole+Canyon+and+Made+it+Home+Safe+Playing+CanyonRunner&hashtags=html5,games&via=zackproser","_blank")}};CanyonRunner.HowToPlay=function(a){this.advanceButton=null};
CanyonRunner.HowToPlay.prototype={create:function(){this.background=this.game.device.desktop?this.add.sprite(0,0,"sprites","how-to-play-desktop"):this.add.sprite(0,0,"sprites","how-to-play-mobile");this.advanceButton=this.add.button(350,500,"sprites",this.startGame,this,"start-button","start-button","start-button")},update:function(){},startGame:function(a){this.state.start("NavigationSupply")}};CanyonRunner.Level1=function(a){};
CanyonRunner.Level1.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.sound.play("aronara");this.background=this.game.add.tileSprite(0,-100,2731,800,"desert");this.background.fixedToCamera=!0;this.game.device.desktop||(this.buttonUp=this.game.add.button(this.game.world.centerX-300,this.game.world.centerY+50,"sprites",null,this,"up-arrow","up-arrow","up-arrow"),this.buttonUp.fixedToCamera=!0,this.buttonUp.onInputDown.add(function(){this.up=!0},this),this.buttonUp.onInputUp.add(function(){this.up=
!1},this),this.buttonRight=this.game.add.button(this.game.world.centerX-200,this.game.world.centerY+100,"sprites",null,this,"right-arrow","right-arrow","right-arrow"),this.buttonRight.fixedToCamera=!0,this.buttonRight.onInputDown.add(function(){this.right=!0},this),this.buttonRight.onInputUp.add(function(){this.right=!1},this),this.buttonDown=this.game.add.button(this.game.world.centerX-300,this.game.world.centerY+150,"sprites",null,this,"down-arrow","down-arrow","down-arrow"),this.buttonDown.fixedToCamera=
!0,this.buttonDown.onInputDown.add(function(){this.down=!0},this),this.buttonDown.onInputUp.add(function(){this.down=!1},this),this.buttonLeft=this.game.add.button(this.game.world.centerX-400,this.game.world.centerY+100,"sprites",null,this,"left-arrow","left-arrow","left-arrow"),this.buttonLeft.fixedToCamera=!0,this.buttonLeft.onInputDown.add(function(){this.left=!0},this),this.buttonLeft.onInputUp.add(function(){this.left=!1},this));this.fireButton=this.game.device.desktop?this.game.add.button(this.game.world.centerX-
60,this.game.world.centerY-300,"sprites",null,this,"fire-missile-button-desktop","fire-missile-button-desktop","fire-missile-button-desktop"):this.game.add.button(this.game.world.centerX-350,this.game.world.centerY-150,"sprites",null,this,"fire-missile-button-mobile","fire-missile-button-mobile","fire-missile-button-mobile");this.fireButton.fixedToCamera=!0;this.fireButton.onInputDown.add(function(){this.fireMissile()},this);this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-
290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.pauseButton=this.game.add.sprite(this.game.world.centerX+320,this.game.world.centerY-280,"sprites","pause-button");this.pauseButton.inputEnabled=!0;this.pauseButton.fixedToCamera=!0;this.pauseButton.events.onInputUp.add(function(){this.game.paused=!0;this.pauseButton.tint=16711680},this);this.game.input.onDown.add(function(){this.game.paused&&
(this.game.paused=!1);this.pauseButton.tint=16777215},this);this.playerStats;null!=localStorage.getItem("Canyon_Runner_9282733_playerStats")?this.playerStats=JSON.parse(localStorage.getItem("Canyon_Runner_9282733_playerStats")):this.playerStats={topScore:0,topTime:0,returnPlayerToState:"HowToPlay"};this.player=this.game.add.sprite(64,64,"sprites","rocket-sprite");this.player.y=320;this.health=3;this.wooshTimer=this.missileTimer=this.healthTextTimer=this.healthTimer=0;this.missilesAway=!1;this.player.inputEnabled=
!0;this.player.input.enableDrag(!1,!0,!0);this.game.physics.enable(this.player,Phaser.Physics.ARCADE);this.player.body.bounce.y=.2;this.player.body.collideWorldBounds=!0;this.player.body.setSize(64,34,0,15);this.game.device.desktop&&(this.emitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400),this.emitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]),this.emitter.gravity=20,this.emitter.setAlpha(1,0,3E3),this.emitter.setScale(.4,0,.4,0,5E3),this.emitter.start(!1,
3E3,5),this.emitter.emitX=this.player.x-25,this.emitter.emitY=this.player.y+30,this.burnEngines=!0);this.handleLevelCompleteCalled=this.levelComplete=this.gameOver=this.debugMode=!1;this.shakeWorld=0;this.checkPlayerAvoidance=!0;this.score=0;this.survivalTimer=this.game.time.create(this.game);this.survivalTimer.start();this.game.physics.startSystem(Phaser.Physics.ARCADE);this.game.camera.follow(this.player);cursors=this.game.input.keyboard.createCursorKeys();spaceBar=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
spaceBar.onDown.add(this.fireMissile,this);this.healthkits=this.game.add.group();this.healthkits.enableBody=!0;this.healthkits.createMultiple(20,"sprites","healthkit");this.missiles=this.game.add.group();this.missiles.enableBody=!0;this.missiles.createMultiple(20,"sprites","missile");this.lower_rocks=this.game.add.group();this.lower_rocks.enableBody=!0;this.lower_rocks.createMultiple(20,"sprites","rock");this.upper_rocks=this.game.add.group();this.upper_rocks.enableBody=!0;this.upper_rocks.createMultiple(20,
"sprites","inverted-rock");this.scoreTextStyle={font:"25px Arial",fill:"#fff",stroke:"#000",strokeThickness:5,align:"center"};this.scoreText=this.game.add.text(20,20,"Deadly Spires Avoided:",this.scoreTextStyle);this.scoreCounterStyle={font:"25px Arial",fill:"#f3f3f3",stroke:"#000",strokeThickness:5,align:"center"};this.scoreCounter=this.game.add.text(290,20,"0",this.scoreCounterStyle);this.lowerRocksLoop=this.game.time.events.loop(3500,this.addLowerRocks,this);this.upperRocksLoop=this.game.time.events.loop(4E3,
this.addUpperRocks,this);this.healthKitsLoop=this.game.time.events.loop(9E3,this.addHealthKits,this)},playWoosh:function(){this.game.time.now>this.wooshTimer&&!this.levelComplete&&(this.sound.play("swoosh"),this.wooshTimer=this.game.time.now+4E3)},toggleMute:function(){this.game.sound.mute?(this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.game.sound.mute=!0,this.soundButton.tint=16711680)},update:function(){50<=this.score&&(this.handleLevelCompleteCalled||this.handleLevelComplete());
this.burnEngines&&(this.emitter.emitX=this.player.x-25,this.emitter.emitY=this.player.y+30);this.missilesAway&&(this.missileTrailEmitter.emitX=this.missile.x+5,this.missileTrailEmitter.emitY=this.missile.y+27);this.game.physics.arcade.overlap(this.player,[this.upper_rocks,this.lower_rocks],this.handleShipCollision,null,this);this.game.physics.arcade.overlap(this.player,this.healthkits,this.healShip,null,this);this.game.physics.arcade.overlap(this.missiles,[this.upper_rocks,this.lower_rocks],this.handleMissileCollision,
null,this);this.checkPlayerAvoidance&&(this.upper_rocks.getFirstAlive()&&this.player.x>this.upper_rocks.getFirstAlive().x&&(this.playWoosh(),this.scoreCounter.setText(this.score)),this.lower_rocks.getFirstAlive()&&this.player.x>this.lower_rocks.getFirstAlive().x&&(this.playWoosh(),this.scoreCounter.setText(this.score)));this.player.body.velocity.x=0;this.player.body.velocity.y=0;this.playerSpeed=250;this.backgroundTileSpeed=4;this.background.tilePosition.x=this.levelComplete?this.background.tilePosition.x-
10:this.background.tilePosition.x-2;this.bottomTileBound=-80;this.topTileBound=80;if(cursors.left.isDown||!0===this.left)this.player.body.velocity.x=-this.playerSpeed,this.background.tilePosition.x+=this.backgroundTileSpeed;else if(cursors.right.isDown||!0===this.right)this.player.body.velocity.x=this.playerSpeed,this.background.tilePosition.x-=this.backgroundTileSpeed;else if(cursors.up.isDown||!0===this.up)this.player.body.velocity.y=-this.playerSpeed,this.background.tilePosition.y<this.topTileBound&&
(this.background.tilePosition.y+=1);else if(cursors.down.isDown||!0===this.down)this.player.body.velocity.y=this.playerSpeed,this.background.tilePosition.y>this.bottomTileBound&&--this.background.tilePosition.y;if(0<this.shakeWorld){var a=this.game.rnd.integerInRange(-20,15),b=this.game.rnd.integerInRange(-20,15);this.game.world.setBounds(a,b,this.game.width+a,this.game.height+b);this.shakeWorld--;this.healthkit&&(this.healthkit.checkWorldBounds=!1);0==this.shakeWorld&&(this.game.world.setBounds(0,
0,this.game.width,this.game.height),this.healthkit&&(this.healthkit.checkWorldBounds=!0),this.lower_rocks.checkWorldBounds=!0)}},placeBottomRock:function(a,b,d){this.score+=1;var c=this.lower_rocks.getFirstDead();c.reset(a,b);c.body.velocity.x=-d;c.body.setSize(70,378,50,0);c.checkWorldBounds=!0;c.outOfBoundsKill=!0},placeUpperRock:function(a,b,d){this.score+=1;var c=this.upper_rocks.getFirstDead();c.reset(a,b);c.body.velocity.x=-d;c.body.setSize(80,360,20,0);c.checkWorldBounds=!0;c.outOfBoundsKill=
!0},placeHealthkit:function(a,b,d){this.healthkit=this.healthkits.getFirstDead();this.healthkit.reset(a,b);this.healthkit.body.velocity.x=-d;this.healthkit.checkWorldBounds=!0;this.healthkit.outOfBoundsKill=!0},addLowerRocks:function(){var a=Math.floor(200*Math.random())+200,b=Math.ceil(400*Math.random())+250;this.placeBottomRock(800,b,a)},addUpperRocks:function(){var a=Math.floor(200*Math.random())+200,b=Math.floor(-149*Math.random())-1;this.placeUpperRock(800,b,a)},addHealthKits:function(){var a=
Math.floor(200*Math.random())+100;this.placeHealthkit(800,a,this.game.world.centerY)},healShip:function(){3>this.health?(++this.health,this.healthkits.getFirstAlive().kill(),this.sound.play("heal"),this.game.device.desktop&&(this.healthEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.healthEmitter.makeParticles("sprites",["healthorb1","healthorb2","healthorb3"]),this.healthEmitter.gravity=50,this.healthEmitter.setAlpha(1,0,4E3),this.healthEmitter.start(!0,2E3,
4),this.healthEmitter.emitX=this.player.x,this.healthEmitter.emitY=this.player.y),this.handleShipTint()):(this.fullHealthTextStyle={font:"25px Arial",fill:"#09e000",stroke:"#000",strokeThickness:4,align:"center"},this.fullHealthTextString="Already at full health!",this.game.time.now>this.healthTextTimer&&(this.fullHealthText=this.game.add.text(this.player.x,this.player.y,this.fullHealthTextString,this.fullHealthTextStyle),this.healthTextTimer=this.game.time.now+1200,this.healthTextExpiration=this.game.time.create(this.game),
this.healthTextExpiration.add(1E3,function(){this.fullHealthText.destroy()},this),this.healthTextExpiration.start()))},handleShipCollision:function(a,b){b.kill();0>=this.health&&this.restartGame();this.decrementHealth();this.shakeWorld=80;this.sound.play("crash");this.game.device.desktop&&(this.scrapEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.scrapEmitter.makeParticles("sprites",["scrap1","scrap2","scrap3","scrap4"]),this.scrapEmitter.gravity=400,this.scrapEmitter.setAlpha(1,
0,4E3),this.scrapEmitter.start(!0,2E3,4),this.scrapEmitter.emitX=this.player.x,this.scrapEmitter.emitY=this.player.y)},handleMissileCollision:function(a,b){this.game.device.desktop&&(this.rockEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.rockEmitter.makeParticles("sprites",["scrap1","scrap2","scrap3","scrap4"]),this.rockEmitter.gravity=400,this.rockEmitter.setAlpha(1,0,4E3),this.rockEmitter.start(!0,2E3,5),this.rockEmitter.emitX=a.x,this.rockEmitter.emitY=
a.y);this.sound.play("explosion");b.kill();a.kill();this.missileTrailEmitter&&this.missileTrailEmitter.destroy()},decrementHealth:function(){this.game.time.now>this.healthTimer&&(--this.health,this.healthTimer=this.game.time.now+750,this.handleShipTint())},handleShipTint:function(){switch(this.health){case 3:this.player.tint=16777215;break;case 2:this.player.tint=16743485;break;case 1:this.player.tint=16711680}},fireMissile:function(){this.game.time.now>this.missileTimer?(this.missileTimer=this.game.time.now+
9E3,this.fireButton.tint=7896446,this.reloadTintTimer=this.game.time.create(this.game),this.reloadTintTimer.add(9E3,function(){this.fireButton.tint=16777215;this.sound.play("missile-reload")},this),this.reloadTintTimer.start(),this.sound.play("launch"),this.missile=this.missiles.getFirstDead(),this.missile.reset(this.player.x+15,this.player.y),this.missile.body.velocity.x=400,this.game.device.desktop&&(this.missileTrailEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,
400),this.missileTrailEmitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]),this.missileTrailEmitter.gravity=50,this.missileTrailEmitter.setAlpha(1,0,3E3),this.missileTrailEmitter.setScale(.3,0,.3,0,2E3),this.missileTrailEmitter.start(!1,3E3,5),this.missilesAway=!0,this.missileEmitterExpiration=this.game.time.create(this.game),this.missileEmitterExpiration.add(1200,function(){this.missileTrailEmitter&&this.missileTrailEmitter.destroy()},this),this.missileEmitterExpiration.start())):
this.sound.play("negative")},handleLevelComplete:function(){this.levelComplete=this.handleLevelCompleteCalled=!0;this.game.time.events.remove(this.lowerRocksLoop);this.game.time.events.remove(this.upperRocksLoop);this.game.time.events.remove(this.healthKitsLoop);this.player.body.enable=!1;this.fireButton.kill();this.game.device.desktop||(this.buttonLeft.kill(),this.buttonRight.kill(),this.buttonUp.kill(),this.buttonDown.kill());this.sound.stop("aronara");this.sound.play("success");this.successText=
this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"sprites","success");this.successText.anchor.set(.5,.5);this.game.add.tween(this.player).to({x:this.game.world.centerX,y:this.game.world.centerY-150},2E3,Phaser.Easing.Linear.None,!0);this.handleUserDataLevelComplete()},restartGame:function(){this.levelComplete||(this.handleLevelCompleteCalled=!0,this.explosion=this.game.add.sprite(64,64,"sprites","explosion1"),this.explosion.animations.add("explode","explosion1 explosion2 explosion3 explosion4 explosion5 explosion6 explosion7 explosion8 explosion9 explosion10 explosion11 explosion12 explosion13 explosion14 explosion15 explosion16".split(" ")),
this.explosion.animations.play("explode",20),this.explosion.x=this.player.x,this.explosion.y=this.player.y,this.sound.play("explosion"),this.sound.stop("aronara"),this.player.kill(),this.gameOver=!0,this.game.device.desktop&&this.emitter.kill(),this.sound.stop("swoosh"),this.fireButton.kill(),this.game.device.desktop||(this.buttonLeft.kill(),this.buttonRight.kill(),this.buttonUp.kill(),this.buttonDown.kill()),this.kaboomText=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"sprites",
"kaboom"),this.kaboomText.anchor.set(.5,.5),this.handleUserDataGameLoss())},handleUserDataGameLoss:function(){this.interval=0;this.step=this.playerStats.topScore-this.interval;this.score>this.step&&(this.playerStats.topScore=this.interval+this.score);this.playerStats.topTime+=this.survivalTimer.seconds;localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));this.resetTimer=this.game.time.create(this.game);this.resetTimer.add(4E3,function(){this.explosion.kill();
this.game.state.start("MainMenu")},this);this.resetTimer.start()},handleUserDataLevelComplete:function(){this.playerStats.topScore=50;this.playerStats.topTime+=this.survivalTimer.seconds;this.playerStats.returnPlayerToState="NavigationBandit";localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));this.buttonAdvance=this.game.add.button(350,500,"sprites",this.nextLevel,this,"advance-button","advance-button","advance-button");this.buttonAdvance.fixedToCamera=!0},
nextLevel:function(){this.sound.stop("success");this.state.start("NavigationBandit")},quitGame:function(a){this.state.start("MainMenu")}};CanyonRunner.Level2=function(a){};
CanyonRunner.Level2.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.sound.play("AngryMod");this.background=this.game.add.tileSprite(0,-100,4464,800,"desert2");this.background.fixedToCamera=!0;this.game.device.desktop||(this.buttonUp=this.game.add.button(this.game.world.centerX-300,this.game.world.centerY+50,"sprites",null,this,"up-arrow","up-arrow","up-arrow"),this.buttonUp.fixedToCamera=!0,this.buttonUp.onInputDown.add(function(){this.up=!0},this),this.buttonUp.onInputUp.add(function(){this.up=
!1},this),this.buttonRight=this.game.add.button(this.game.world.centerX-200,this.game.world.centerY+100,"sprites",null,this,"right-arrow","right-arrow","right-arrow"),this.buttonRight.fixedToCamera=!0,this.buttonRight.onInputDown.add(function(){this.right=!0},this),this.buttonRight.onInputUp.add(function(){this.right=!1},this),this.buttonDown=this.game.add.button(this.game.world.centerX-300,this.game.world.centerY+150,"sprites",null,this,"down-arrow","down-arrow","down-arrow"),this.buttonDown.fixedToCamera=
!0,this.buttonDown.onInputDown.add(function(){this.down=!0},this),this.buttonDown.onInputUp.add(function(){this.down=!1},this),this.buttonLeft=this.game.add.button(this.game.world.centerX-400,this.game.world.centerY+100,"sprites",null,this,"left-arrow","left-arrow","left-arrow"),this.buttonLeft.fixedToCamera=!0,this.buttonLeft.onInputDown.add(function(){this.left=!0},this),this.buttonLeft.onInputUp.add(function(){this.left=!1},this));this.fireButton=this.game.device.desktop?this.game.add.button(this.game.world.centerX-
60,this.game.world.centerY-300,"sprites",null,this,"fire-missile-button-desktop","fire-missile-button-desktop","fire-missile-button-desktop"):this.game.add.button(this.game.world.centerX-350,this.game.world.centerY-150,"sprites",null,this,"fire-missile-button-mobile","fire-missile-button-mobile","fire-missile-button-mobile");this.fireButton.fixedToCamera=!0;this.fireButton.onInputDown.add(function(){this.fireMissile()},this);this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-
290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.pauseButton=this.game.add.sprite(this.game.world.centerX+320,this.game.world.centerY-280,"sprites","pause-button");this.pauseButton.inputEnabled=!0;this.pauseButton.fixedToCamera=!0;this.pauseButton.events.onInputUp.add(function(){this.game.paused=!0;this.pauseButton.tint=16711680},this);this.game.input.onDown.add(function(){this.game.paused&&
(this.game.paused=!1);this.pauseButton.tint=16777215},this);this.playerStats;null!=localStorage.getItem("Canyon_Runner_9282733_playerStats")?this.playerStats=JSON.parse(localStorage.getItem("Canyon_Runner_9282733_playerStats")):this.playerStats={topScore:0,topTime:0,returnPlayerToState:"HowToPlay"};this.player=this.game.add.sprite(64,64,"sprites","rocket-sprite");this.player.y=320;this.bandit=null;this.banditTimer=0;this.health=3;this.wooshTimer=this.missileTimer=this.healthTextTimer=this.healthTimer=
0;this.missilesAway=!1;this.player.inputEnabled=!0;this.player.input.enableDrag(!1,!0,!0);this.game.physics.enable(this.player,Phaser.Physics.ARCADE);this.player.body.bounce.y=.2;this.player.body.collideWorldBounds=!0;this.player.body.setSize(64,34,0,15);this.game.device.desktop&&(this.emitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400),this.emitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]),this.emitter.gravity=20,this.emitter.setAlpha(1,0,3E3),
this.emitter.setScale(.4,0,.4,0,5E3),this.emitter.start(!1,3E3,5),this.emitter.emitX=this.player.x-25,this.emitter.emitY=this.player.y+30,this.burnEngines=!0);this.handleLevelCompleteCalled=this.levelComplete=this.gameOver=this.debugMode=!1;this.shakeWorld=0;this.banditAttackInProgress=!1;this.checkPlayerAvoidance=!0;this.score=0;this.survivalTimer=this.game.time.create(this.game);this.survivalTimer.start();this.game.physics.startSystem(Phaser.Physics.ARCADE);this.game.camera.follow(this.player);
cursors=this.game.input.keyboard.createCursorKeys();spaceBar=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);spaceBar.onDown.add(this.fireMissile,this);this.healthkits=this.game.add.group();this.healthkits.enableBody=!0;this.healthkits.createMultiple(20,"sprites","healthkit");this.missiles=this.game.add.group();this.missiles.enableBody=!0;this.missiles.createMultiple(20,"sprites","missile");this.banditMissiles=this.game.add.group();this.banditMissiles.enableBody=!0;this.banditMissiles.createMultiple(20,
"sprites","bandit-missile");this.lower_rocks=this.game.add.group();this.lower_rocks.enableBody=!0;this.lower_rocks.createMultiple(20,"sprites","rock");this.upper_rocks=this.game.add.group();this.upper_rocks.enableBody=!0;this.upper_rocks.createMultiple(20,"sprites","inverted-rock");this.bandits=this.game.add.group();this.bandits.enableBody=!0;this.bandits.createMultiple(20,"sprites","bandit");this.scoreTextStyle={font:"25px Arial",fill:"#fff",stroke:"#000",strokeThickness:5,align:"center"};this.scoreText=
this.game.add.text(20,20,"Deadly Spires Avoided:",this.scoreTextStyle);this.scoreCounterStyle={font:"25px Arial",fill:"#f3f3f3",stroke:"#000",strokeThickness:5,align:"center"};this.scoreCounter=this.game.add.text(290,20,"0",this.scoreCounterStyle);this.lowerRocksLoop=this.game.time.events.loop(3500,this.addLowerRocks,this);this.upperRocksLoop=this.game.time.events.loop(4E3,this.addUpperRocks,this);this.healthKitsLoop=this.game.time.events.loop(9E3,this.addHealthKits,this);this.banditsLoop=this.game.time.events.loop(2E3,
this.banditAttack,this);this.banditAttackLoop=this.game.time.events.loop(4E3,this.banditFireMissile,this)},playWoosh:function(){this.game.time.now>this.wooshTimer&&!this.levelComplete&&(this.mute||this.sound.play("swoosh"),this.wooshTimer=this.game.time.now+4E3)},toggleMute:function(){this.mute?(this.mute=this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.mute=this.game.sound.mute=!0,this.soundButton.tint=16711680)},update:function(){50<=this.score&&(this.handleLevelCompleteCalled||this.handleLevelComplete());
this.burnEngines&&(this.emitter.emitX=this.player.x-25,this.emitter.emitY=this.player.y+30);this.missilesAway&&(this.missileTrailEmitter.emitX=this.missile.x+5,this.missileTrailEmitter.emitY=this.missile.y+27);this.banditMissilesAway&&(this.banditMissileTrailEmitter.emitX=this.banditMissile.x+45,this.banditMissileTrailEmitter.emitY=this.banditMissile.y+27);this.banditAttackInProgress&&this.banditShadowPlayer();this.game.physics.arcade.overlap(this.player,[this.upper_rocks,this.lower_rocks],this.handleShipCollision,
null,this);this.game.physics.arcade.overlap(this.player,this.healthkits,this.healShip,null,this);this.game.physics.arcade.overlap(this.missiles,[this.upper_rocks,this.lower_rocks],this.handleMissileCollision,null,this);this.game.physics.arcade.overlap(this.player,this.bandit,this.handleBanditCollision,null,this);this.game.physics.arcade.overlap(this.missiles,this.bandit,this.banditHitByMissile,null,this);this.game.physics.arcade.overlap(this.banditMissiles,this.player,this.playerHitByMissile,null,
this);this.checkPlayerAvoidance&&(this.upper_rocks.getFirstAlive()&&this.player.x>this.upper_rocks.getFirstAlive().x&&(this.playWoosh(),this.scoreCounter.setText(this.score)),this.lower_rocks.getFirstAlive()&&this.player.x>this.lower_rocks.getFirstAlive().x&&(this.playWoosh(),this.scoreCounter.setText(this.score)));this.player.body.velocity.x=0;this.player.body.velocity.y=0;this.playerSpeed=250;this.backgroundTileSpeed=4;this.background.tilePosition.x=this.levelComplete?this.background.tilePosition.x-
10:this.background.tilePosition.x-2;this.bottomTileBound=-80;this.topTileBound=80;if(cursors.left.isDown||!0===this.left)this.player.body.velocity.x=-this.playerSpeed,this.background.tilePosition.x+=this.backgroundTileSpeed;else if(cursors.right.isDown||!0===this.right)this.player.body.velocity.x=this.playerSpeed,this.background.tilePosition.x-=this.backgroundTileSpeed;else if(cursors.up.isDown||!0===this.up)this.player.body.velocity.y=-this.playerSpeed,this.background.tilePosition.y<this.topTileBound&&
(this.background.tilePosition.y+=1);else if(cursors.down.isDown||!0===this.down)this.player.body.velocity.y=this.playerSpeed,this.background.tilePosition.y>this.bottomTileBound&&--this.background.tilePosition.y;if(0<this.shakeWorld){var a=this.game.rnd.integerInRange(-20,15),b=this.game.rnd.integerInRange(-20,15);this.game.world.setBounds(a,b,this.game.width+a,this.game.height+b);this.shakeWorld--;this.healthkit&&(this.healthkit.checkWorldBounds=!1);0==this.shakeWorld&&(this.game.world.setBounds(0,
0,this.game.width,this.game.height),this.healthkit&&(this.healthkit.checkWorldBounds=!0))}},placeBottomRock:function(a,b,d){this.score+=1;var c=this.lower_rocks.getFirstDead();c.tint=16489839;c.reset(a,b);c.body.velocity.x=-d;c.body.setSize(70,378,50,0);c.checkWorldBounds=!0;c.outOfBoundsKill=!0},placeUpperRock:function(a,b,d){this.score+=1;var c=this.upper_rocks.getFirstDead();c.tint=16489839;c.reset(a,b);c.body.velocity.x=-d;c.body.setSize(80,360,20,0);c.checkWorldBounds=!0;c.outOfBoundsKill=!0},
banditAttack:function(){!this.banditAttackInProgress&&this.game.time.now>this.banditTimer&&(this.banditAttackInProgress=!0,this.banditTimer=this.game.time.now+15E3,this.bandit=this.game.add.sprite(64,64,"sprites","bandit"),this.game.physics.enable(this.bandit,Phaser.Physics.ARCADE),this.bandit.body.bounce.y=.2,this.bandit.body.collideWorldBounds=!0,this.bandit.body.setSize(64,34,0,15),this.bandit.x=730,this.bandit.y=this.player.y,this.bandit.checkWorldBounds=!1,this.bandit.outOfBoundsKill=!1,this.incomingMissileAlertTextStyle=
{font:"25px Arial",fill:"#ff9800",stroke:"#000",strokeThickness:3,align:"center"},this.incomingMissileAlertTextString="Incoming Missile Alert!",this.incomingMissileAlertText=this.game.add.text(this.player.x,this.player.y,this.incomingMissileAlertTextString,this.incomingMissileAlertTextStyle),this.incomingMissileAlertTextExpiration=this.game.time.create(this.game),this.incomingMissileAlertTextExpiration.add(1E3,function(){this.incomingMissileAlertText.destroy()},this),this.incomingMissileAlertTextExpiration.start(),
this.sound.play("missile-lock"))},banditFireMissile:function(){this.banditAttackInProgress&&this.bandit&&(this.mute||(this.sound.play("launch"),this.sound.play("missile-lock")),this.banditMissile=this.banditMissiles.getFirstDead())&&(this.banditMissile.reset(this.bandit.x-15,this.bandit.y),this.banditMissile.body.velocity.x=-400,this.game.device.desktop&&(this.banditMissileTrailEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400),this.banditMissileTrailEmitter.makeParticles("sprites",
["fire1","fire2","fire3","smoke-puff"]),this.banditMissileTrailEmitter.gravity=50,this.banditMissileTrailEmitter.setAlpha(1,0,3E3),this.banditMissileTrailEmitter.setScale(.3,0,.3,0,2E3),this.banditMissileTrailEmitter.start(!1,3E3,5),this.banditMissilesAway=!0,this.banditMissileEmitterExpiration=this.game.time.create(this.game),this.banditMissileEmitterExpiration.add(1200,function(){this.banditMissileTrailEmitter&&this.banditMissileTrailEmitter.destroy()},this),this.banditMissileEmitterExpiration.start()))},
banditShadowPlayer:function(){this.bandit.y=this.player.y},placeHealthkit:function(a,b,d){this.healthkit=this.healthkits.getFirstDead();this.healthkit.reset(a,b);this.healthkit.body.velocity.x=-d;this.healthkit.checkWorldBounds=!0;this.healthkit.outOfBoundsKill=!0},addLowerRocks:function(){var a=Math.floor(200*Math.random())+200,b=Math.ceil(400*Math.random())+250;this.placeBottomRock(800,b,a)},addUpperRocks:function(){var a=Math.floor(200*Math.random())+200,b=Math.floor(-149*Math.random())-1;this.placeUpperRock(800,
b,a)},addBandits:function(){var a=Math.floor(200*Math.random())+200,b=Math.floor(-149*Math.random())-1;this.placeBandit(800,b,a)},addHealthKits:function(){var a=Math.floor(200*Math.random())+100;this.placeHealthkit(800,a,this.game.world.centerY)},healShip:function(){3>this.health?(++this.health,this.healthkits.getFirstAlive().kill(),this.mute||this.sound.play("heal"),this.game.device.desktop&&(this.healthEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.healthEmitter.makeParticles("sprites",
["healthorb1","healthorb2","healthorb3"]),this.healthEmitter.gravity=50,this.healthEmitter.setAlpha(1,0,4E3),this.healthEmitter.start(!0,2E3,4),this.healthEmitter.emitX=this.player.x,this.healthEmitter.emitY=this.player.y),this.handleShipTint()):(this.fullHealthTextStyle={font:"25px Arial",fill:"#09e000",stroke:"#000",strokeThickness:4,align:"center"},this.fullHealthTextString="Already at full health!",this.game.time.now>this.healthTextTimer&&(this.fullHealthText=this.game.add.text(this.player.x,
this.player.y,this.fullHealthTextString,this.fullHealthTextStyle),this.healthTextTimer=this.game.time.now+1200,this.healthTextExpiration=this.game.time.create(this.game),this.healthTextExpiration.add(1E3,function(){this.fullHealthText.destroy()},this),this.healthTextExpiration.start()))},handleShipCollision:function(a,b){b.kill();0>=this.health&&this.restartGame();this.decrementHealth();this.shakeWorld=80;this.mute||this.sound.play("crash");this.game.device.desktop&&(this.scrapEmitter=this.game.add.emitter(this.game.world.centerX,
this.game.world.centerY,100),this.scrapEmitter.makeParticles("sprites",["scrap1","scrap2","scrap3","scrap4"]),this.scrapEmitter.gravity=400,this.scrapEmitter.setAlpha(1,0,4E3),this.scrapEmitter.start(!0,2E3,4),this.scrapEmitter.emitX=this.player.x,this.scrapEmitter.emitY=this.player.y)},playerHitByMissile:function(a,b){this.restartGame();this.shakeWorld=80;this.sound.play("explosion");b.kill();this.banditMissileTrailEmitter&&this.banditMissileTrailEmitter.destroy()},handleMissileCollision:function(a,
b){this.game.device.desktop&&(this.rockEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.rockEmitter.makeParticles("sprites",["scrap1","scrap2","scrap3","scrap4"]),this.rockEmitter.gravity=400,this.rockEmitter.setAlpha(1,0,4E3),this.rockEmitter.start(!0,2E3,5),this.rockEmitter.emitX=a.x,this.rockEmitter.emitY=a.y);this.sound.play("explosion");b.kill();a.kill();this.missileTrailEmitter&&this.missileTrailEmitter.destroy()},handleBanditCollision:function(a,b){0>=
this.health&&this.restartGame();this.decrementHealth();this.shakeWorld=80;this.sound.play("explosion")},banditHitByMissile:function(a,b){a.kill();this.destroyBandit(b);this.banditTimer=this.game.time.now+6E3},destroyBandit:function(a){this.banditExplosion=this.game.add.sprite(64,64,"sprites","explosion1");this.banditExplosion.animations.add("explode","explosion1 explosion2 explosion3 explosion4 explosion5 explosion6 explosion7 explosion8 explosion9 explosion10 explosion11 explosion12 explosion13 explosion14 explosion15 explosion16".split(" "));
this.banditExplosion.animations.play("explode",20);this.banditExplosion.x=a.x;this.banditExplosion.y=a.y;this.sound.play("explosion");a.kill();this.banditAttackInProgress=!1;this.banditExplosionCleanup=this.game.time.create(this.game);this.banditExplosionCleanup.add(800,function(){this.banditExplosion.destroy()},this);this.banditExplosionCleanup.start();this.banditTimer=this.game.time.now+6E3},decrementHealth:function(){this.game.time.now>this.healthTimer&&(--this.health,this.healthTimer=this.game.time.now+
750,this.handleShipTint())},handleShipTint:function(){switch(this.health){case 3:this.player.tint=16777215;break;case 2:this.player.tint=16743485;break;case 1:this.player.tint=16711680}},fireMissile:function(){this.game.time.now>this.missileTimer?(this.missileTimer=this.game.time.now+9E3,this.fireButton.tint=7896446,this.reloadTintTimer=this.game.time.create(this.game),this.reloadTintTimer.add(9E3,function(){this.fireButton.tint=16777215;this.sound.play("missile-reload")},this),this.reloadTintTimer.start(),
this.sound.play("launch"),this.missile=this.missiles.getFirstDead(),this.missile.reset(this.player.x+15,this.player.y),this.missile.body.velocity.x=400,this.game.device.desktop&&(this.missileTrailEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400),this.missileTrailEmitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]),this.missileTrailEmitter.gravity=50,this.missileTrailEmitter.setAlpha(1,0,3E3),this.missileTrailEmitter.setScale(.3,0,.3,0,2E3),this.missileTrailEmitter.start(!1,
3E3,5),this.missilesAway=!0,this.missileEmitterExpiration=this.game.time.create(this.game),this.missileEmitterExpiration.add(1200,function(){this.missileTrailEmitter&&this.missileTrailEmitter.destroy()},this),this.missileEmitterExpiration.start())):this.sound.play("negative")},handleLevelComplete:function(){this.levelComplete=this.handleLevelCompleteCalled=!0;this.game.time.events.remove(this.lowerRocksLoop);this.game.time.events.remove(this.upperRocksLoop);this.game.time.events.remove(this.healthKitsLoop);
this.game.time.events.remove(this.banditsLoop);this.game.time.events.remove(this.banditAttackLoop);this.fireButton.kill();this.game.device.desktop||(this.buttonLeft.kill(),this.buttonRight.kill(),this.buttonUp.kill(),this.buttonDown.kill());this.player.body.enable=!1;this.sound.stop("AngryMod");this.sound.play("success");this.successText=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"sprites","success");this.successText.anchor.set(.5,.5);this.player&&this.game.add.tween(this.player).to({x:this.game.world.centerX,
y:this.game.world.centerY-150},2E3,Phaser.Easing.Linear.None,!0);this.banditAttackInProgress&&(this.bandit&&(this.bandit.checkWorldBounds=!0,this.bandit.outOfBoundsKill=!0,this.game.add.tween(this.bandit).to({x:-300,y:this.game.world.centerY+400},3E3,Phaser.Easing.Linear.None,!0)),this.banditMissile&&this.game.add.tween(this.banditMissile).to({x:-300,y:this.game.world.centerY+400},3E3,Phaser.Easing.Linear.None,!0));this.handleUserDataLevelComplete()},restartGame:function(){this.levelComplete||(this.handleLevelCompleteCalled=
!0,this.explosion=this.game.add.sprite(64,64,"sprites","explosion1"),this.explosion.animations.add("explode","explosion1 explosion2 explosion3 explosion4 explosion5 explosion6 explosion7 explosion8 explosion9 explosion10 explosion11 explosion12 explosion13 explosion14 explosion15 explosion16".split(" ")),this.explosion.animations.play("explode",20),this.explosion.x=this.player.x,this.explosion.y=this.player.y,this.sound.play("explosion"),this.sound.stop("AngryMod"),this.player.kill(),this.gameOver=
!0,this.game.device.desktop&&this.emitter.kill(),this.sound.stop("swoosh"),this.fireButton.kill(),this.game.device.desktop||(this.buttonLeft.kill(),this.buttonRight.kill(),this.buttonUp.kill(),this.buttonDown.kill()),this.kaboomText=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"sprites","kaboom"),this.kaboomText.anchor.set(.5,.5),this.banditAttackInProgress&&(this.bandit&&(this.bandit.checkWorldBounds=!0,this.bandit.outOfBoundsKill=!0),this.game.add.tween(this.bandit).to({x:this.game.world.centerX,
y:this.game.world.centerY-700},3E3,Phaser.Easing.Linear.None,!0),this.sound.stop("missile-lock")),this.game.time.events.remove(this.banditAttackLoop),this.game.time.events.remove(this.banditsLoop),this.handleUserDataGameLoss())},handleUserDataGameLoss:function(){this.interval=50;this.step=this.playerStats.topScore-this.interval;this.score>this.step&&(this.playerStats.topScore=this.interval+this.score);this.playerStats.topTime+=this.survivalTimer.seconds;this.playerStats.returnPlayerToState="NavigationBandit";
localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));this.resetTimer=this.game.time.create(this.game);this.resetTimer.add(4E3,function(){this.explosion.kill();this.game.state.start("MainMenu")},this);this.resetTimer.start()},handleUserDataLevelComplete:function(){this.playerStats.topScore=100;this.playerStats.topTime+=this.survivalTimer.seconds;this.playerStats.returnPlayerToState="NavigationHome";localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));
this.buttonAdvance=this.game.add.button(350,500,"sprites",this.nextLevel,this,"advance-button","advance-button","advance-button");this.buttonAdvance.fixedToCamera=!0},nextLevel:function(){this.sound.stop("success");this.state.start("NavigationHome")},quitGame:function(a){this.state.start("NavigationHome")}};CanyonRunner.Level3=function(a){};
CanyonRunner.Level3.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.sound.play("sonar");this.background=this.game.add.tileSprite(0,0,1200,700,"dark-forest");this.background.fixedToCamera=!0;this.game.device.desktop||(this.buttonUp=this.game.add.button(this.game.world.centerX-300,this.game.world.centerY+50,"sprites",null,this,"up-arrow","up-arrow","up-arrow"),this.buttonUp.fixedToCamera=!0,this.buttonUp.onInputDown.add(function(){this.up=!0},this),this.buttonUp.onInputUp.add(function(){this.up=
!1},this),this.buttonRight=this.game.add.button(this.game.world.centerX-200,this.game.world.centerY+100,"sprites",null,this,"right-arrow","right-arrow","right-arrow"),this.buttonRight.fixedToCamera=!0,this.buttonRight.onInputDown.add(function(){this.right=!0},this),this.buttonRight.onInputUp.add(function(){this.right=!1},this),this.buttonDown=this.game.add.button(this.game.world.centerX-300,this.game.world.centerY+150,"sprites",null,this,"down-arrow","down-arrow","down-arrow"),this.buttonDown.fixedToCamera=
!0,this.buttonDown.onInputDown.add(function(){this.down=!0},this),this.buttonDown.onInputUp.add(function(){this.down=!1},this),this.buttonLeft=this.game.add.button(this.game.world.centerX-400,this.game.world.centerY+100,"sprites",null,this,"left-arrow","left-arrow","left-arrow"),this.buttonLeft.fixedToCamera=!0,this.buttonLeft.onInputDown.add(function(){this.left=!0},this),this.buttonLeft.onInputUp.add(function(){this.left=!1},this));this.fireButton=this.game.device.desktop?this.game.add.button(this.game.world.centerX-
60,this.game.world.centerY-300,"sprites",null,this,"fire-missile-button-desktop","fire-missile-button-desktop","fire-missile-button-desktop"):this.game.add.button(this.game.world.centerX-350,this.game.world.centerY-150,"sprites",null,this,"fire-missile-button-mobile","fire-missile-button-mobile","fire-missile-button-mobile");this.fireButton.fixedToCamera=!0;this.fireButton.onInputDown.add(function(){this.fireMissile()},this);this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-
290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.pauseButton=this.game.add.sprite(this.game.world.centerX+320,this.game.world.centerY-280,"sprites","pause-button");this.pauseButton.inputEnabled=!0;this.pauseButton.fixedToCamera=!0;this.pauseButton.events.onInputUp.add(function(){this.game.paused=!0;this.pauseButton.tint=16711680},this);this.game.input.onDown.add(function(){this.game.paused&&
(this.game.paused=!1);this.pauseButton.tint=16777215},this);this.playerStats;null!=localStorage.getItem("Canyon_Runner_9282733_playerStats")?this.playerStats=JSON.parse(localStorage.getItem("Canyon_Runner_9282733_playerStats")):this.playerStats={topScore:0,topTime:0,returnPlayerToState:"NavigationHome"};this.player=this.game.add.sprite(64,64,"sprites","rocket-sprite");this.player.y=320;this.health=3;this.wooshTimer=this.crashTimer=this.missileTimer=this.healthTextTimer=this.healthTimer=0;this.missilesAway=
!1;this.player.inputEnabled=!0;this.player.input.enableDrag(!1,!0,!0);this.game.physics.enable(this.player,Phaser.Physics.ARCADE);this.player.body.bounce.y=.2;this.player.body.collideWorldBounds=!0;this.player.body.setSize(64,34,0,15);this.game.device.desktop&&(this.emitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400),this.emitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]),this.emitter.gravity=20,this.emitter.setAlpha(1,0,3E3),this.emitter.setScale(.4,
0,.4,0,5E3),this.emitter.start(!1,3E3,5),this.emitter.emitX=this.player.x-25,this.emitter.emitY=this.player.y+30,this.burnEngines=!0);this.debugMode=!0;this.handleLevelCompleteCalled=this.levelComplete=this.gameOver=!1;this.shakeWorld=0;this.checkPlayerAvoidance=!0;this.score=0;this.survivalTimer=this.game.time.create(this.game);this.survivalTimer.start();this.game.physics.startSystem(Phaser.Physics.ARCADE);this.game.camera.follow(this.player);cursors=this.game.input.keyboard.createCursorKeys();spaceBar=
this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);spaceBar.onDown.add(this.fireMissile,this);this.healthkits=this.game.add.group();this.healthkits.enableBody=!0;this.healthkits.createMultiple(20,"sprites","healthkit");this.missiles=this.game.add.group();this.missiles.enableBody=!0;this.missiles.createMultiple(20,"sprites","missile");this.lower_rocks=this.game.add.group();this.lower_rocks.enableBody=!0;this.lower_rocks.createMultiple(20,"sprites","rock");this.upper_rocks=this.game.add.group();
this.upper_rocks.enableBody=!0;this.upper_rocks.createMultiple(20,"sprites","inverted-rock");this.asteroids=this.game.add.group();this.asteroids.enableBody=!0;this.asteroids.createMultiple(20,"sprites","asteroid1");this.scoreTextStyle={font:"25px Arial",fill:"#fff",stroke:"#000",strokeThickness:5,align:"center"};this.scoreText=this.game.add.text(20,20,"Deadly Spires Avoided:",this.scoreTextStyle);this.scoreCounterStyle={font:"25px Arial",fill:"#f3f3f3",stroke:"#000",strokeThickness:5,align:"center"};
this.scoreCounter=this.game.add.text(290,20,"0",this.scoreCounterStyle);this.lowerRocksLoop=this.game.time.events.loop(3500,this.addLowerRocks,this);this.upperRocksLoop=this.game.time.events.loop(4E3,this.addUpperRocks,this);this.healthKitsLoop=this.game.time.events.loop(9E3,this.addHealthKits,this);this.asteroids1Loop=this.game.time.events.loop(1E3,this.addAsteroids1,this)},playWoosh:function(){this.game.time.now>this.wooshTimer&&!this.levelComplete&&(this.mute||this.sound.play("swoosh"),this.wooshTimer=
this.game.time.now+4E3)},toggleMute:function(){this.mute?(this.mute=this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.mute=this.game.sound.mute=!0,this.soundButton.tint=16711680)},update:function(){50<=this.score&&(this.handleLevelCompleteCalled||this.handleLevelComplete());this.burnEngines&&(this.emitter.emitX=this.player.x-25,this.emitter.emitY=this.player.y+30);this.missilesAway&&(this.missileTrailEmitter.emitX=this.missile.x+5,this.missileTrailEmitter.emitY=this.missile.y+27);this.game.physics.arcade.overlap(this.player,
[this.upper_rocks,this.lower_rocks],this.handleShipCollision,null,this);this.game.physics.arcade.overlap(this.player,this.healthkits,this.healShip,null,this);this.game.physics.arcade.overlap(this.missiles,[this.upper_rocks,this.lower_rocks],this.handleMissileCollision,null,this);this.game.physics.arcade.overlap(this.player,this.asteroids,this.handleShipCollision,null,this);this.checkPlayerAvoidance&&(this.upper_rocks.getFirstAlive()&&this.player.x>this.upper_rocks.getFirstAlive().x&&(this.playWoosh(),
this.scoreCounter.setText(this.score)),this.lower_rocks.getFirstAlive()&&this.player.x>this.lower_rocks.getFirstAlive().x&&(this.playWoosh(),this.scoreCounter.setText(this.score)));this.player.body.velocity.x=0;this.player.body.velocity.y=0;this.playerSpeed=250;this.backgroundTileSpeed=4;this.background.tilePosition.x=this.levelComplete?this.background.tilePosition.x-10:this.background.tilePosition.x-2;this.bottomTileBound=-60;this.topTileBound=0;if(cursors.left.isDown||!0===this.left)this.player.body.velocity.x=
-this.playerSpeed,this.background.tilePosition.x+=this.backgroundTileSpeed;else if(cursors.right.isDown||!0===this.right)this.player.body.velocity.x=this.playerSpeed,this.background.tilePosition.x-=this.backgroundTileSpeed;else if(cursors.up.isDown||!0===this.up)this.player.body.velocity.y=-this.playerSpeed,this.background.tilePosition.y<this.topTileBound&&(this.background.tilePosition.y+=1);else if(cursors.down.isDown||!0===this.down)this.player.body.velocity.y=this.playerSpeed,this.background.tilePosition.y>
this.bottomTileBound&&--this.background.tilePosition.y;if(0<this.shakeWorld){var a=this.game.rnd.integerInRange(-20,20),b=this.game.rnd.integerInRange(-20,20);this.game.world.setBounds(a,b,this.game.width+a,this.game.height+b);this.shakeWorld--;this.healthkit&&(this.healthkit.checkWorldBounds=!1);0==this.shakeWorld&&(this.game.world.setBounds(0,0,this.game.width,this.game.height),this.healthkit&&(this.healthkit.checkWorldBounds=!0))}},placeBottomRock:function(a,b,d){this.score+=1;var c=this.lower_rocks.getFirstDead();
c.tint=7356038;c.reset(a,b);c.body.velocity.x=-d;c.body.setSize(70,378,50,0);this.game.debug.body(c);c.checkWorldBounds=!0;c.outOfBoundsKill=!0},placeUpperRock:function(a,b,d){this.score+=1;var c=this.upper_rocks.getFirstDead();c.tint=7356038;c.reset(a,b);c.body.velocity.x=-d;c.body.setSize(80,360,20,0);c.checkWorldBounds=!0;c.outOfBoundsKill=!0},placeHealthkit:function(a,b,d){this.healthkit=this.healthkits.getFirstDead();this.healthkit.reset(a,b);this.healthkit.body.velocity.x=-d;this.healthkit.checkWorldBounds=
!0;this.healthkit.outOfBoundsKill=!0},placeAsteroid1:function(a,b,d){var c=this.asteroids.getFirstDead();c.reset(a,b);c.body.velocity.y=d;c.body.setSize(64,64,0,0);c.animations.add("rotate","asteroid1 asteroid2 asteroid3 asteroid4 asteroid5 asteroid6 asteroid7 asteroid8 asteroid9 asteroid10 asteroid11 asteroid12 asteroid13 asteroid14 asteroid15 asteroid15 asteroid16 asteroid17 asteroid18 asteroid19 asteroid20".split(" "));c.animations.play("rotate",20,!0);c.checkWorldBounds=!0;c.outOfBoundsKill=!0},
addLowerRocks:function(){var a=Math.floor(200*Math.random())+200,b=Math.ceil(400*Math.random())+250;this.placeBottomRock(800,b,a)},addUpperRocks:function(){var a=Math.floor(200*Math.random())+200,b=Math.floor(-149*Math.random())-1;this.placeUpperRock(800,b,a)},addHealthKits:function(){var a=Math.floor(200*Math.random())+100;this.placeHealthkit(800,a,this.game.world.centerY)},addAsteroids1:function(){var a=Math.floor(250*Math.random())+100,b=Math.floor(100*Math.random())+Math.floor(800*Math.random())+
1;this.placeAsteroid1(b,0,a)},healShip:function(){3>this.health?(++this.health,this.healthkits.getFirstAlive().kill(),this.mute||this.sound.play("heal"),this.game.device.desktop&&(this.healthEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.healthEmitter.makeParticles("sprites",["healthorb1","healthorb2","healthorb3"]),this.healthEmitter.gravity=50,this.healthEmitter.setAlpha(1,0,4E3),this.healthEmitter.start(!0,2E3,4),this.healthEmitter.emitX=this.player.x,this.healthEmitter.emitY=
this.player.y),this.handleShipTint()):(this.fullHealthTextStyle={font:"25px Arial",fill:"#09e000",stroke:"#000",strokeThickness:4,align:"center"},this.fullHealthTextString="Already at full health!",this.game.time.now>this.healthTextTimer&&(this.fullHealthText=this.game.add.text(this.player.x,this.player.y,this.fullHealthTextString,this.fullHealthTextStyle),this.healthTextTimer=this.game.time.now+1200,this.healthTextExpiration=this.game.time.create(this.game),this.healthTextExpiration.add(1E3,function(){this.fullHealthText.destroy()},
this),this.healthTextExpiration.start()))},handleShipCollision:function(a,b){b.kill();0>=this.health&&this.restartGame();this.decrementHealth();this.shakeWorld=80;this.sound.play("crash");this.game.device.desktop&&(this.scrapEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.scrapEmitter.makeParticles("sprites",["scrap1","scrap2","scrap3","scrap4"]),this.scrapEmitter.gravity=400,this.scrapEmitter.setAlpha(1,0,4E3),this.scrapEmitter.start(!0,2E3,4),this.scrapEmitter.emitX=
this.player.x,this.scrapEmitter.emitY=this.player.y)},handleMissileCollision:function(a,b){this.game.device.desktop&&(this.rockEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,100),this.rockEmitter.makeParticles("sprites",["scrap1","scrap2","scrap3","scrap4"]),this.rockEmitter.gravity=400,this.rockEmitter.setAlpha(1,0,4E3),this.rockEmitter.start(!0,2E3,5),this.rockEmitter.emitX=a.x,this.rockEmitter.emitY=a.y);this.sound.play("explosion");b.kill();a.kill();this.missileTrailEmitter&&
this.missileTrailEmitter.destroy()},decrementHealth:function(){this.game.time.now>this.healthTimer&&(--this.health,this.healthTimer=this.game.time.now+750,this.handleShipTint())},handleShipTint:function(){switch(this.health){case 3:this.player.tint=16777215;break;case 2:this.player.tint=16743485;break;case 1:this.player.tint=16711680}},fireMissile:function(){this.game.time.now>this.missileTimer?(this.missileTimer=this.game.time.now+9E3,this.fireButton.tint=7896446,this.reloadTintTimer=this.game.time.create(this.game),
this.reloadTintTimer.add(9E3,function(){this.fireButton.tint=16777215;this.sound.play("missile-reload")},this),this.reloadTintTimer.start(),this.sound.play("launch"),this.missile=this.missiles.getFirstDead(),this.missile.reset(this.player.x+15,this.player.y),this.missile.body.velocity.x=400,this.game.device.desktop&&(this.missileTrailEmitter=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400),this.missileTrailEmitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]),
this.missileTrailEmitter.gravity=50,this.missileTrailEmitter.setAlpha(1,0,3E3),this.missileTrailEmitter.setScale(.3,0,.3,0,2E3),this.missileTrailEmitter.start(!1,3E3,5),this.missilesAway=!0,this.missileEmitterExpiration=this.game.time.create(this.game),this.missileEmitterExpiration.add(1200,function(){this.missileTrailEmitter&&this.missileTrailEmitter.destroy()},this),this.missileEmitterExpiration.start())):this.sound.play("negative")},handleLevelComplete:function(){this.levelComplete=this.handleLevelCompleteCalled=
!0;this.sound.stop("sonar");this.sound.play("success");this.game.time.events.remove(this.lowerRocksLoop);this.game.time.events.remove(this.upperRocksLoop);this.game.time.events.remove(this.healthKitsLoop);this.game.time.events.remove(this.asteroids1Loop);this.fireButton.kill();this.game.device.desktop||(this.buttonLeft.kill(),this.buttonRight.kill(),this.buttonUp.kill(),this.buttonDown.kill());this.player.body.enable=!1;this.successText=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,
"sprites","success");this.successText.anchor.set(.5,.5);this.game.add.tween(this.player).to({x:this.game.world.centerX,y:this.game.world.centerY-150},2E3,Phaser.Easing.Linear.None,!0);this.handleUserDataLevelComplete()},restartGame:function(){this.levelComplete||(this.handleLevelCompleteCalled=!0,this.explosion=this.game.add.sprite(64,64,"sprites","explosion1"),this.explosion.animations.add("explode","explosion1 explosion2 explosion3 explosion4 explosion5 explosion6 explosion7 explosion8 explosion9 explosion10 explosion11 explosion12 explosion13 explosion14 explosion15 explosion16".split(" ")),
this.explosion.animations.play("explode",20),this.explosion.x=this.player.x,this.explosion.y=this.player.y,this.sound.play("explosion"),this.sound.stop("sonar"),this.player.kill(),this.gameOver=!0,this.game.device.desktop&&this.emitter.kill(),this.sound.stop("swoosh"),this.fireButton.kill(),this.game.device.desktop||(this.buttonLeft.kill(),this.buttonRight.kill(),this.buttonUp.kill(),this.buttonDown.kill()),this.kaboomText=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"sprites",
"kaboom"),this.kaboomText.anchor.set(.5,.5),this.handleUserDataGameLoss())},handleUserDataGameLoss:function(){this.interval=100;this.step=this.playerStats.topScore-this.interval;this.score>this.step&&(this.playerStats.topScore=this.interval+this.score);this.playerStats.topTime+=this.survivalTimer.seconds;this.playerStats.returnPlayerToState="NavigationHome";localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));this.resetTimer=this.game.time.create(this.game);this.resetTimer.add(4E3,
function(){this.explosion.kill();this.game.state.start("MainMenu")},this);this.resetTimer.start()},handleUserDataLevelComplete:function(){this.playerStats.topScore=150;this.playerStats.topTime+=this.survivalTimer.seconds;this.playerStats.returnPlayerToState="NavigationSupply";localStorage.setItem("Canyon_Runner_9282733_playerStats",JSON.stringify(this.playerStats));this.buttonAdvance=this.game.add.button(350,500,"sprites",this.nextLevel,this,"advance-button","advance-button","advance-button");this.buttonAdvance.fixedToCamera=
!0},nextLevel:function(){this.sound.stop("success");this.state.start("EmotionalFulcrum")},quitGame:function(a){this.state.start("MainMenu")}};CanyonRunner.MainMenu=function(a){};
CanyonRunner.MainMenu.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.playerStats;null!=localStorage.getItem("Canyon_Runner_9282733_playerStats")?this.playerStats=JSON.parse(localStorage.getItem("Canyon_Runner_9282733_playerStats")):this.playerStats={topScore:0,topTime:0,returnPlayerToState:"HowToPlay"};this.background=this.game.add.tileSprite(0,0,1200,600,"desert-open");this.background.fixedToCamera=!0;this.splashscreen=this.add.sprite(0,0,"sprites","canyon-runner-splash");
this.sound.play("aronara");this.soundButton=this.game.add.button(this.game.world.centerX+335,this.game.world.centerY-285,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;0<this.playerStats.topScore&&0<this.playerStats.topTime&&(this.playerStatTextStyle={font:"30px Helvetica",fill:"#fff",stroke:"#000",strokeThickness:5,align:"center"},this.playerStatString="YOUR TOP SCORE: "+this.playerStats.topScore+
" & YOUR TOP TIME: "+Math.round(this.playerStats.topTime),this.playerStatText=this.game.add.text(this.game.world.centerX-350,this.game.world.centerY-275,this.playerStatString,this.playerStatTextStyle));this.player=this.game.add.sprite(64,64,"sprites","rocket-sprite");this.player.y=320;this.game.physics.enable(this.player,Phaser.Physics.ARCADE);this.player.body.bounce.y=.2;this.player.body.collideWorldBounds=!0;this.player.body.setSize(64,34,0,15);this.game.time.events.add(300,this.introFlyingScene,
this);this.startbutton=this.add.button(350,500,"sprites",this.startGame,this,"start-button","start-button","start-button")},update:function(){this.background.tilePosition.x=this.jetFired?this.background.tilePosition.x-10:this.background.tilePosition.x-2;this.barrelRoll&&(this.rollTimer=this.game.time.create(this.game),this.rollTimer.add(300,function(){this.player.angle+=10},this),this.rollTimer.start());this.burnEngines&&(this.emitter.emitX=this.player.x-25,this.emitter.emitY=this.player.y+30)},toggleMute:function(){this.mute?
(this.mute=this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.mute=this.game.sound.mute=!0,this.soundButton.tint=16711680)},introFlyingScene:function(){this.introTween=this.game.add.tween(this.player);this.introTween.to({x:420},2E3);this.introTween.start();this.introFlyingTimer=this.game.time.create(this.game);this.introFlyingTimer.add(1100,function(){this.hoverShipAnimation()},this);this.introFlyingTimer.start();this.engineBurnTimer=this.game.time.create(this.game);this.engineBurnTimer.add(2E3,
function(){this.startEngines();this.jetFired=!0},this);this.engineBurnTimer.start();this.initialPauseTimer=this.game.time.create(this.game);this.initialPauseTimer.add(2500,function(){this.hoverShip=!1},this);this.initialPauseTimer.start()},hoverShipAnimation:function(){this.hoverShip=!0;this.hoverShipTimer=this.game.time.create(this.game);this.hoverShipTimer.add(2E3,function(){this.hoverShip=!1;this.player.angle=0},this);this.hoverShipTimer.start()},startEngines:function(){this.emitter=this.game.add.emitter(this.game.world.centerX,
this.game.world.centerY,400);this.emitter.makeParticles("sprites",["fire1","fire2","fire3","smoke-puff"]);this.emitter.gravity=200;this.emitter.setAlpha(1,0,2E3);this.emitter.setScale(.4,0,.4,0,2E3);this.emitter.start(!1,3E3,3);this.burnEngines=!0;this.sound.play("rocket-start")},doABarrelRoll:function(){this.barrelRoll=!0;this.rollExpirationTimer=this.game.time.create(this.game);this.rollExpirationTimer.add(1200,function(){this.barrelRoll=!1},this);this.rollExpirationTimer.start()},startGame:function(a){this.sound.stop("aronara");
this.state.start(this.playerStats.returnPlayerToState)}};CanyonRunner.NavigationBandit=function(a){this.advanceButton=null};
CanyonRunner.NavigationBandit.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.background=this.add.sprite(0,0,"sprites","navigation-bandit");this.mute=!1;this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.advanceButton=this.add.button(320,500,"sprites",this.startGame,
this,"start-button","start-button","start-button");this.content=[" ","Scans of This Canyon Reveal Hostile Activity","Bandits Here Are Famed For Their Violence","You Will Kill Or You Will Be Killed...","Your Children Are Starving and Terrified..."];this.index=0;this.line="";this.level1ObjectiveTextStyle={font:"35px Helvetica",fill:"#05c619",stroke:"#000",strokeThickness:10,align:"center"};this.text=this.game.add.text(this.game.world.centerX-350,this.game.world.centerY-275,this.level1ObjectiveTextString,
this.level1ObjectiveTextStyle);this.sound.play("sonar");this.nextLine()},updateLine:function(){this.line.length<this.content[this.index].length?(this.line=this.content[this.index].substr(0,this.line.length+1),this.text.setText(this.line)):this.game.time.events.add(2*Phaser.Timer.SECOND,this.nextLine,this)},nextLine:function(){this.index++;this.index<this.content.length&&(this.line="",this.game.time.events.repeat(80,this.content[this.index].length+1,this.updateLine,this))},update:function(){},toggleMute:function(){this.mute?
(this.mute=this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.mute=this.game.sound.mute=!0,this.soundButton.tint=16711680)},startGame:function(a){this.sound.stop("sonar");this.state.start("Level2")}};CanyonRunner.NavigationHome=function(a){this.advanceButton=null};
CanyonRunner.NavigationHome.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.background=this.add.sprite(0,0,"sprites","navigation-home");this.mute=!1;this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.advanceButton=this.add.button(320,500,"sprites",this.startGame,
this,"start-button","start-button","start-button");this.content=" ;Night Falls. You Approach Your Home Sector;There Are 50 Major Spires To Avoid Here...;Heavy Meteor Showers Detected In This Area;You Must Obtain a Fix On Your Home Beacon;Navigate Through the Storm. Ping Your Home.".split(";");this.index=0;this.line="";this.level1ObjectiveTextStyle={font:"35px Helvetica",fill:"#05c619",stroke:"#000",strokeThickness:10,align:"center"};this.text=this.game.add.text(this.game.world.centerX-350,this.game.world.centerY-
275,this.level1ObjectiveTextString,this.level1ObjectiveTextStyle);this.sound.play("sonar");this.nextLine()},updateLine:function(){this.line.length<this.content[this.index].length?(this.line=this.content[this.index].substr(0,this.line.length+1),this.text.setText(this.line)):this.game.time.events.add(2*Phaser.Timer.SECOND,this.nextLine,this)},nextLine:function(){this.index++;this.index<this.content.length&&(this.line="",this.game.time.events.repeat(80,this.content[this.index].length+1,this.updateLine,
this))},update:function(){},toggleMute:function(){this.mute?(this.mute=this.game.sound.mute=!1,this.soundButton.tint=16777215):(this.mute=this.game.sound.mute=!0,this.soundButton.tint=16711680)},startGame:function(a){this.sound.stop("sonar");this.state.start("Level3")}};CanyonRunner.NavigationSupply=function(a){this.advanceButton=null};
CanyonRunner.NavigationSupply.prototype={create:function(){this.sound=this.game.add.audioSprite("sound");this.background=this.add.sprite(0,0,"sprites","navigation-supply");this.soundButton=this.game.add.button(this.game.world.centerX+240,this.game.world.centerY-290,"sprites",this.toggleMute,this,"sound-icon","sound-icon","sound-icon");this.soundButton.fixedToCamera=!0;this.soundButton.tint=this.game.sound.mute?16711680:16777215;this.advanceButton=this.add.button(320,500,"sprites",this.startGame,this,
"start-button","start-button","start-button");this.content=[" ","Race Your Supplies Home to Your Family","Scans of This Canyon Reveal 50 Major Spires","Your Family Is Counting on You to Return..."];this.index=0;this.line="";this.level1ObjectiveTextStyle={font:"35px Helvetica",fill:"#05c619",stroke:"#000",strokeThickness:10,align:"center"};this.text=this.game.add.text(this.game.world.centerX-350,this.game.world.centerY-275,this.level1ObjectiveTextString,this.level1ObjectiveTextStyle);this.sound.play("sonar");
this.nextLine()},updateLine:function(){this.line.length<this.content[this.index].length?(this.line=this.content[this.index].substr(0,this.line.length+1),this.text.setText(this.line)):this.game.time.events.add(2*Phaser.Timer.SECOND,this.nextLine,this)},nextLine:function(){this.index++;this.index<this.content.length&&(this.line="",this.game.time.events.repeat(80,this.content[this.index].length+1,this.updateLine,this))},update:function(){},toggleMute:function(){this.mute?(this.mute=this.game.sound.mute=
!1,this.soundButton.tint=16777215):(this.mute=this.game.sound.mute=!0,this.soundButton.tint=16711680)},startGame:function(a){this.sound.stop("sonar");this.state.start("Level1")}};CanyonRunner.Preloader=function(a){this.ready=!1};
CanyonRunner.Preloader.prototype={preload:function(){this.background=this.add.sprite(0,0,"desert-open");this.splashscreen=this.add.sprite(0,0,"sprites","canyon-runner-splash");this.preloadBar=this.add.sprite(this.game.world.centerX-127.5,this.game.world.centerY,"sprites","progress");this.load.setPreloadSprite(this.preloadBar);this.game.load.image("desert-open","assets/backgrounds/desert-open.png");this.game.load.image("sad-desert","assets/backgrounds/sad-desert.png");this.game.load.image("dark-forest",
"assets/backgrounds/level3-background.png");this.game.load.image("desert","assets/backgrounds/level1-background.png");this.game.load.image("desert2","assets/backgrounds/level2-background.png");this.game.device.firefox||this.game.device.chrome||this.game.device.chromeOS?this.game.load.audiosprite("sound","assets/audio/audio.ogg","assets/audio/audio.json"):this.game.load.audiosprite("sound","assets/audio/audio.m4a","assets/audio/audio.json")},create:function(){this.preloadBar.cropEnabled=!1},update:function(){this.cache.isSoundDecoded("sound")&&
0==this.ready&&this.state.start("MainMenu")}};
